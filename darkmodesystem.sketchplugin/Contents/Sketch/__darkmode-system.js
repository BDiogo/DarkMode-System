var globalThis=this,global=this;function __skpm_run(e,t){globalThis.context=t;try{var r=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){e.exports=require("sketch")},function(e,t){e.exports=require("sketch/dom")},function(e,t,r){"use strict";r.r(t),r.d(t,"getSettings",(function(){return o})),r.d(t,"deleteAll",(function(){return s})),r.d(t,"documentColors",(function(){return c})),r.d(t,"DeleteAllSettings",(function(){return d})),r.d(t,"switchDark",(function(){return u})),r.d(t,"switchLight",(function(){return h})),r.d(t,"createDarkmode",(function(){return f}));var n=r(0),a=r.n(n),i=r(3),l=(r(1).Rectangle,r(1).Text,r(1).Artboard,r(9));r(1).Style,r(1).SharedStyle;function o(e){g(e,"settings")}function s(e){g(e,"delete")}function c(e){g(e,"colors")}function d(e){g(e,"deletesettings")}function u(e){g(e,"switchDark")}function h(e){g(e,"switchLight")}function f(e){g(e,"darkmode")}function g(e,t){var r=a.a.getSelectedDocument(),n=30,o=232,s=600,c=l.documentSettingForKey(r,"Styles");if(null==c&&l.setDocumentSettingForKey(r,"Styles",[]),null==l.documentSettingForKey(r,"Styles_Containers")&&l.setDocumentSettingForKey(r,"Styles_Containers",[]),null==l.documentSettingForKey(r,"Styles_Layers")&&l.setDocumentSettingForKey(r,"Styles_Layers",[]),null==l.documentSettingForKey(r,"Styles_Texts")&&l.setDocumentSettingForKey(r,"Styles_Texts",[]),t&&"darkmode"==t){console.log("entered darkmode");r=a.a.getSelectedDocument(),l.documentSettingForKey(r,"Styles");var d=l.documentSettingForKey(r,"colors"),u=NSAlert.alloc().init(),h=e.plugin.urlForResourceNamed("icon.png").path(),f=NSImage.alloc().initByReferencingFile(h),g=NSView.alloc().init();g=NSView.alloc().initWithFrame(NSMakeRect(0,0,s,o));var y=s/4-10,S=i.createLabel("Clean Unvalid Settings",12,NSMakeRect(0,n+2,y,16));g.addSubview(S);S=i.createLabel("Sync Layers with SharedStyles",12,NSMakeRect(y+10,n+2,y,16));g.addSubview(S);S=i.createLabel("Create DarkMode Version",12,NSMakeRect(2*(y+10),n+2,y,16));g.addSubview(S);S=i.createLabel("Switch to DarkMode ",12,NSMakeRect(3*(y+10),n+2,y,16));g.addSubview(S),n=CGRectGetMaxY(g.subviews().lastObject().frame())+5;S=i.createBoldLabel("Step 1",12,NSMakeRect(0,n+2,y,16));g.addSubview(S);S=i.createBoldLabel("Step 2",12,NSMakeRect(y+10,n+2,y,16));g.addSubview(S);S=i.createBoldLabel("Step 3",12,NSMakeRect(2*(y+10),n+2,y,16));g.addSubview(S);S=i.createBoldLabel("Step 4",12,NSMakeRect(3*(y+10),n+2,y,16));g.addSubview(S),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;var p=i.createColoredBlock("#fa6a00",NSMakeRect(0,n,y,12),!1);g.addSubview(p);p=i.createColoredBlock("#b25f29",NSMakeRect(y+10,n,y,12),!1);g.addSubview(p);p=i.createColoredBlock("#66422c",NSMakeRect(2*(y+10),n,y,12),!1);g.addSubview(p);p=i.createColoredBlock("#2d2e38",NSMakeRect(3*(y+10),n,y,12),!1);g.addSubview(p),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;S=i.createBoldLabel("Process Overview",15,NSMakeRect(0,n+2,s,16));g.addSubview(S);for(var m=[],b=0;b<r.pages.length;b++){var v=a.a.find("Shape",r.pages[b]).length+a.a.find("ShapePath",r.pages[b]).length+a.a.find("Text",r.pages[b]).length;m.push(r.pages[b].name+" - "+v)}n=CGRectGetMaxY(g.subviews().lastObject().frame())+30;var w=i.createPopUpButton(m,0,NSMakeRect(0,n,s/2,22));g.addSubview(w),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;S=i.createBoldLabel("Select Page to Transform",15,NSMakeRect(0,n+2,s,16));g.addSubview(S),u.setIcon(f),u.setMessageText("Create Dark Mode System"),u.setInformativeText("This might take a while...."),u.accessoryView=g;u.addButtonWithTitle("Create Dark Mode"),u.addButtonWithTitle("Cancel");if(1e3==(H=u.runModal())){var x=l.documentSettingForKey(r,"Styles_Layers"),k=i.reviewSettings(r,x);l.setDocumentSettingForKey(r,"Styles_Layers",k);var M=l.documentSettingForKey(r,"Styles_Containers"),_=i.reviewSettings(r,M);l.setDocumentSettingForKey(r,"Styles_Containers",_);var F=l.documentSettingForKey(r,"Styles_Texts"),N=i.reviewSettings(r,F);l.setDocumentSettingForKey(r,"Styles_Texts",N);var I=w.indexOfSelectedItem(),T=(a.a.find("Shape",r.pages[I]),a.a.find("ShapePath",r.pages[I]),a.a.find("Text",r.pages[I]),i.syncLayerwithStyles_best(l,a.a,r,I));r.sharedLayerStyles=T.layer,r.sharedTextStyles=T.text;r.sharedLayerStyles.length,r.sharedTextStyles.length,T.new_styles;var C=i.createDarkModeStyle(l,r,T.layer,T.text,T.new_styles);l.setDocumentSettingForKey(r,"Styles",C.settings),l.setDocumentSettingForKey(r,"Styles_Containers",C.settings_c),l.setDocumentSettingForKey(r,"Styles_Layers",C.settings_l),l.setDocumentSettingForKey(r,"Styles_Texts",C.settings_t),r.sharedLayerStyles=C.layer,r.sharedTextStyles=C.text,(Z=i.SwitchDarkMode_best(l,a.a,r,I,C.layer,C.text,!0))>0?a.a.UI.message(" Created Dark Mode version in "+Z+" Layers Sucessfully!"):a.a.UI.message(" All layers are already in Light Mode or haven't created a DarkMode System")}}else if(t&&"switchDark"==t){o=90,s=300;r=a.a.getSelectedDocument(),l.documentSettingForKey(r,"Styles"),d=l.documentSettingForKey(r,"colors"),u=NSAlert.alloc().init(),h=e.plugin.urlForResourceNamed("icon.png").path(),f=NSImage.alloc().initByReferencingFile(h),g=NSView.alloc().init();g=NSView.alloc().initWithFrame(NSMakeRect(0,0,s,o));for(m=[],b=0;b<r.pages.length;b++)m.push(r.pages[b].name);w=i.createPopUpButton(m,0,NSMakeRect(0,n,s,22));g.addSubview(w),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;S=i.createBoldLabel("Select Page to Transform",15,NSMakeRect(0,n+2,s,16));g.addSubview(S),u.setIcon(f),u.setMessageText("Switch to Light Mode "),u.accessoryView=g;u.addButtonWithTitle("Switch Dark"),u.addButtonWithTitle("Cancel");if(1e3==(H=u.runModal())){I=w.indexOfSelectedItem();(Z=i.SwitchDarkMode_best(l,a.a,r,I,r.sharedLayerStyles,r.sharedTextStyles,!0))>0?a.a.UI.message(" Switched "+Z+" Layers to Dark Mode Sucessfully!"):a.a.UI.message(" All layers are already in Dark Mode or haven't created a DarkMode System")}}else if(t&&"switchLight"==t){o=90,s=300;r=a.a.getSelectedDocument(),l.documentSettingForKey(r,"Styles"),d=l.documentSettingForKey(r,"colors"),u=NSAlert.alloc().init(),h=e.plugin.urlForResourceNamed("icon.png").path(),f=NSImage.alloc().initByReferencingFile(h),g=NSView.alloc().init();g=NSView.alloc().initWithFrame(NSMakeRect(0,0,s,o));for(m=[],b=0;b<r.pages.length;b++)m.push(r.pages[b].name);w=i.createPopUpButton(m,0,NSMakeRect(0,n,s,22));g.addSubview(w),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;S=i.createBoldLabel("Select Page to Transform",15,NSMakeRect(0,n+2,s,16));g.addSubview(S),u.setIcon(f),u.setMessageText("Switch to Light Mode "),u.accessoryView=g;u.addButtonWithTitle("Switch Light"),u.addButtonWithTitle("Cancel");if(1e3==(H=u.runModal())){I=w.indexOfSelectedItem();(Z=i.SwitchDarkMode_best(l,a.a,r,I,r.sharedLayerStyles,r.sharedTextStyles,!1))>0?a.a.UI.message(" Switched "+Z+" Layers to Light Mode Sucessfully!"):a.a.UI.message(" All layers are already in Light Mode or haven't created a DarkMode System")}}else{if(t&&"settings"==t){o=460,s=800;M=l.documentSettingForKey(r,"Styles_Containers"),x=l.documentSettingForKey(r,"Styles_Layers"),F=l.documentSettingForKey(r,"Styles_Texts");var R=26*(M.length+x.length+F.length)*2,O=(u=NSAlert.alloc().init(),h=e.plugin.urlForResourceNamed("icon.png").path(),f=NSImage.alloc().initByReferencingFile(h),NSScrollView.alloc().initWithFrame(NSMakeRect(0,0,s,o)));(g=NSView.alloc().initWithFrame(NSMakeRect(0,0,s,R))).setFlipped(1),O.setHasVerticalScroller(1),O.setDocumentView(g);var L=s/2-220-10+100,D=i.createBoldLabel("Type",12,NSMakeRect(0,n,440,16));g.addSubview(D);var W=i.createBoldLabel("In Colored",12,NSMakeRect(120,n,440,16));g.addSubview(W);var B=i.createBoldLabel("Light Style",12,NSMakeRect(210,n,L,16));g.addSubview(B);var j=i.createBoldLabel("Dark Style",12,NSMakeRect(L+220-10,n,L,16));g.addSubview(j);for(var G=[],A=[],K=(t=[],[]),V=0;V<3;V++){var P;b=0;P=0==V?M:1==V?x:F;for(var E=0;E<P.length;E++){n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;var Y=P[b].dark,U=P[b].light;if("text"==P[b].type){var $=r.getSharedTextStyleWithID(U),z=r.getSharedTextStyleWithID(Y);t[b]=i.createLabel(P[b].element,12,NSMakeRect(0,n+2,440,16)),g.addSubview(t[b])}else{$=r.getSharedLayerStyleWithID(U),z=r.getSharedLayerStyleWithID(Y);t[b]=i.createLabel(P[b].element,12,NSMakeRect(0,n+2,440,16)),g.addSubview(t[b])}K[b]=i.createLabel(String(P[b].colored_container),12,NSMakeRect(120,n+2,440,16)),g.addSubview(K[b]),void 0===$||void 0===z?(G[b]=i.createLabel("-",12,NSMakeRect(210,n+2,s-120,16)),g.addSubview(G[b]),A[b]=i.createLabel("-",12,NSMakeRect(L+220-10,n+2,s-120,16)),g.addSubview(A[b])):(G[b]=i.createLabel($.name,12,NSMakeRect(210,n+2,s-120,16)),g.addSubview(G[b]),A[b]=i.createLabel(z.name,12,NSMakeRect(L+220-10,n+2,s-120,16)),g.addSubview(A[b])),b++}}u.setIcon(f),u.setMessageText("Edit Settings"),u.setInformativeText("Here you can setup some of the variables that help you generate and edit your DarkMode Systems."),u.accessoryView=O;var H=u.runModal();return!1}if(t&&"deletesettings"==t){o=10,s=400;u=NSAlert.alloc().init(),h=e.plugin.urlForResourceNamed("icon.png").path(),f=NSImage.alloc().initByReferencingFile(h),g=NSView.alloc().init();g=NSView.alloc().initWithFrame(NSMakeRect(0,0,s,o)),u.setIcon(f),u.setMessageText("Delete All Settings "),u.setInformativeText("Are you Sure You want to delete all "+c.length+" styles? This will not delete the shared styles connected to the layers, but the setting connecting the 2."),u.accessoryView=g;u.addButtonWithTitle("Delete All"),u.addButtonWithTitle("Delete Unused"),u.addButtonWithTitle("Cancel");if(1e3==(H=u.runModal())){M=l.documentSettingForKey(r,"Styles_Containers"),x=l.documentSettingForKey(r,"Styles_Layers"),F=l.documentSettingForKey(r,"Styles_Texts");l.setDocumentSettingForKey(r,"Styles_Containers",[]),l.setDocumentSettingForKey(r,"Styles_Layers",[]),l.setDocumentSettingForKey(r,"Styles_Texts",[]),a.a.UI.message(" Deleted All! "+M.length+" "+x.length+" "+F.length+" stylesmmm, sucessfully!")}else if(1001==H){x=l.documentSettingForKey(r,"Styles_Layers"),k=i.reviewSettings(r,x);l.setDocumentSettingForKey(r,"Styles_Layers",k);M=l.documentSettingForKey(r,"Styles_Containers"),_=i.reviewSettings(r,M);l.setDocumentSettingForKey(r,"Styles_Containers",_);F=l.documentSettingForKey(r,"Styles_Texts"),N=i.reviewSettings(r,F);l.setDocumentSettingForKey(r,"Styles_Texts",N);var q=M.length-_.length+(F.length-N.length)+(x.length-k.length);a.a.UI.message(" Deleted "+q+" Settings , sucessfully! You now have "+(_.length+N.length+k.length)+" Settings!")}}else if(t&&"colors"==t){var Z=0,J=[],Q=[],X=r.sharedLayerStyles,ee=d=l.documentSettingForKey(r,"colors"),te=[],re=[],ne=[],ae=[],ie=[],le=[],oe=[],se=[],ce=[],de=[],ue=[];for(b=0;b<X.length;b++)if(X[b].style.fills.length>0){var he=X[b].style.fills[0].color,fe=0;for(V=0;V<ee.length;V++)if(he==ee[V].code){fe++;break}for(E=0;E<J.length;E++)if(he==J[E]){fe++;break}0==fe&&(J.push(he),Q.push(X[b].name))}var ge=r.sharedTextStyles,ye=[];for(b=0;b<ge.length;b++){var Se=ge[b].style.textColor;for(fe=0,V=0;V<ee.length;V++)if(Se==ee[V].code){fe++;break}for(E=0;E<ye.length;E++)if(Se==ye[E]){fe++;break}0==fe&&null!=Se&&ye.push(Se)}o=32*d.length+32*J.length+32*ye.length+100+100,s=600;u=NSAlert.alloc().init(),h=e.plugin.urlForResourceNamed("icon.png").path(),f=NSImage.alloc().initByReferencingFile(h),g=NSView.alloc().init();g=NSView.alloc().initWithFrame(NSMakeRect(0,0,s,o)),u.setIcon(f),u.setMessageText("Edit Document Colors"),u.setInformativeText("Here you can setup some of the variables that help you generate and edit your DarkMode Systems."),u.accessoryView=g,te[ee.length]=i.createField("",NSMakeRect(40,n,s/2-50,22)),g.addSubview(te[ee.length]),ie[ee.length]=i.createField("",NSMakeRect(s/2,n,s/2,22)),g.addSubview(ie[ee.length]),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;W=i.createLabel("Color Code",12,NSMakeRect(40,n,s/2-50,22));g.addSubview(W);B=i.createLabel("Color Name",12,NSMakeRect(s/2,n,s/2,22));g.addSubview(B),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;var pe=i.createBoldLabel("Add New Color",12,NSMakeRect(0,n+2,s-120,16));g.addSubview(pe),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;var me=i.createDivider(NSMakeRect(0,n,s,1));g.addSubview(me),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;for(b=J.length-1;b>=0;b--)n=CGRectGetMaxY(g.subviews().lastObject().frame())+10,de[b]=i.createColoredBlock(J[b],NSMakeRect(0,n,22,22),!1),g.addSubview(de[b]),ce[b]=i.createField(J[b],NSMakeRect(40,n,s/2-50,22)),g.addSubview(ce[b]),ue[b]=i.createField(Q[b],NSMakeRect(s/2,n,s/2,22)),g.addSubview(ue[b]);n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;pe=i.createBoldLabel("New Colors from Layer Styles",12,NSMakeRect(0,n+2,s-120,16));g.addSubview(pe),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;me=i.createDivider(NSMakeRect(0,n,s,1));g.addSubview(me),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;for(b=ye.length-1;b>=0;b--)n=CGRectGetMaxY(g.subviews().lastObject().frame())+10,oe[b]=i.createColoredBlock(ye[b],NSMakeRect(0,n,22,22),!1),g.addSubview(oe[b]),le[b]=i.createField(ye[b],NSMakeRect(40,n,s/2-50,22)),g.addSubview(le[b]),se[b]=i.createField(ye[b],NSMakeRect(s/2,n,s/2,22)),g.addSubview(se[b]);n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;pe=i.createBoldLabel("New Colors from Text Styles",12,NSMakeRect(0,n+2,s-120,16));g.addSubview(pe),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;me=i.createDivider(NSMakeRect(0,n,s,1));g.addSubview(me),n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;for(b=ee.length-1;b>=0;b--){n=CGRectGetMaxY(g.subviews().lastObject().frame())+10,ne[b]=i.createColoredBlock(ee[b].code,NSMakeRect(0,n,22,22),!1),g.addSubview(ne[b]),te[b]=i.createField(ee[b].code,NSMakeRect(50,n,s/3-50,22)),g.addSubview(te[b]),ie[b]=i.createField(ee[b].name,NSMakeRect(s/3,n,s/3,22)),g.addSubview(ie[b]),ae[b]=i.createColoredBlock(ee[b].code,NSMakeRect(s/3*2+40,n,22,22),!0),g.addSubview(ae[b]);var be=ee[b].code;if(be.length>7)var ve=be.slice(7,9);else ve="ff";var we=i.DarkMode(be,"Shape_Fill"),xe=i.RGBToHex("rgb("+we.r+","+we.g+","+we.b+")");re[b]=i.createLabel(xe+ve,12,NSMakeRect(s/3*2+90,n,s/3*3-90,22)),g.addSubview(re[b])}n=CGRectGetMaxY(g.subviews().lastObject().frame())+10;pe=i.createBoldLabel("Colors",12,NSMakeRect(0,n+2,s-120,16));g.addSubview(pe),u.accessoryView=g;u.addButtonWithTitle("Update Colors"),u.addButtonWithTitle("Add Color"),u.addButtonWithTitle("Add Text Colors"),u.addButtonWithTitle("Cancel");if(1e3==(H=u.runModal())){var ke=i.validateColorInput(te,ie,!1);l.setDocumentSettingForKey(r,"colors",ke)}else if(1001==H){var Me=0;for(V=0;V<ee.length;V++)if(te[ee.length].stringValue()==ee[V].code){Me++;break}if(0==Me){ke=i.validateColorInput(te,ie,!0);l.setDocumentSettingForKey(r,"colors",ke),a.a.UI.message("Color added!")}else a.a.UI.message(" That Color code already exists! Color not added.")}else if(1002==H){var _e=te.concat(le),Fe=ie.concat(se);ke=i.validateColorInput(_e,Fe,!0);l.setDocumentSettingForKey(r,"colors",ke)}}}}},function(e,r,n){"use strict";n.r(r),n.d(r,"getFontIndex",(function(){return l})),n.d(r,"getSpecificFonts",(function(){return o})),n.d(r,"getFonts",(function(){return s})),n.d(r,"getFontsOld",(function(){return c})),n.d(r,"getFontName",(function(){return d})),n.d(r,"addTextStyle",(function(){return u})),n.d(r,"updateTextStyle",(function(){return h})),n.d(r,"updateTextStyleLabel",(function(){return f})),n.d(r,"createTextStyle",(function(){return g})),n.d(r,"placeTextStyles",(function(){return y})),n.d(r,"elementHasStyle",(function(){return S})),n.d(r,"ifStyleNameAlreadyExists",(function(){return p})),n.d(r,"getStyleByName",(function(){return m})),n.d(r,"getStyleById",(function(){return b})),n.d(r,"getTextStyleByName",(function(){return v})),n.d(r,"updateSettingsWithDocument",(function(){return w})),n.d(r,"updateSettingsWithGlobal",(function(){return x})),n.d(r,"createSelect",(function(){return k})),n.d(r,"createPopUpButton",(function(){return M})),n.d(r,"createPopUpButtonWeights",(function(){return _})),n.d(r,"getIndexforPopupButton",(function(){return F})),n.d(r,"getWeightfromPopupButton",(function(){return N})),n.d(r,"getIs_italic",(function(){return I})),n.d(r,"getTextStyleByNameLabel",(function(){return T})),n.d(r,"getUserDefaults",(function(){return C})),n.d(r,"createBoldLabel",(function(){return R})),n.d(r,"createNotSelectableInput",(function(){return O})),n.d(r,"createLabel",(function(){return L})),n.d(r,"createCheckbox",(function(){return D})),n.d(r,"createColoredBlock",(function(){return W})),n.d(r,"changeColoredBlock",(function(){return B})),n.d(r,"DarkMode",(function(){return j})),n.d(r,"RGBToHex",(function(){return G})),n.d(r,"createDivider",(function(){return P})),n.d(r,"createField",(function(){return E})),n.d(r,"createFieldnoBack",(function(){return Y})),n.d(r,"createFieldControl",(function(){return U})),n.d(r,"setKeyOrder",(function(){return $})),n.d(r,"validateColorInput",(function(){return z})),n.d(r,"OrganizeArrayTextStyles",(function(){return H})),n.d(r,"reviewSettings",(function(){return Q})),n.d(r,"syncLayerwithStyles_best",(function(){return X})),n.d(r,"createDarkModeStyle",(function(){return ae})),n.d(r,"SwitchDarkMode_best",(function(){return oe}));var a=n(0),i=n.n(a);n(4);function l(e,t){for(var r=0,n=0;n<t.length;n++){var a=t[n],i=e,l=document.getSharedTextStyleWithID(style_oposite_id);if(a==i&&null!=l){r=n;break}}return r}function o(e){for(var t=NSFontManager.sharedFontManager(),r={family:[],weights:[]},n=t.availableFontFamilies(),a=0;a<n.length;a++)if(n[a]==e){r.family.push(n[a]);for(var i=t.availableMembersOfFontFamily(n[a]),l=[],o=0;o<i.length;o++)l.push({name:i[o][1],font:i[o][0],weight:i[o][2],variation:i[o][3]});0==i.length.length&&l.push({name:"plain",font:n[a],weight:"5",variation:0}),r.weights.push(l)}return r}function s(){for(var e=NSFontManager.sharedFontManager(),t={family:[],weights:[]},r=(e.availableFonts(),e.availableFontFamilies()),n=e.availableMembersOfFontFamily(r[0]),a=0;a<r.length;a++){t.family.push(r[a]);n=e.availableMembersOfFontFamily(r[a]);for(var i=[],l=0;l<n.length;l++)i.push({name:n[l][1],font:n[l][0],weight:n[l][2],variation:n[l][3]});0==n.length.length&&i.push({name:"plain",font:r[a],weight:"5",variation:0}),t.weights.push(i)}return t}function c(){for(var e=[],t=NSFontManager.sharedFontManager().availableFonts(),r=0;r<t.length;r++)e.push(t[r]);return e}function d(e){for(var t,r=NSFontManager.sharedFontManager().availableFonts(),n=0;n<r.length;++n)if(n==e){t=r[n];break}return t}function u(e,t,r){var n=MSApplicationMetadata.metadata().appVersion,a=e.document.documentData().layerTextStyles();if(a.addSharedStyleWithName_firstInstance)a.addSharedStyleWithName_firstInstance(t,r.style());else if(n<52){var i=MSSharedStyle.alloc().initWithName_firstInstance(t,r.style());a.addSharedObject(i)}else{i=MSSharedStyle.alloc().initWithName_style(t,r.style());a.addSharedObject(i)}return v(e,t)}function h(e,r,n,a,i,l){for(var o=a.base.stringValue(),s=parseFloat(a.ratio.stringValue().replace(",",".")),c=a.font_family.titleOfSelectedItem(),d=a.font_weight.titleOfSelectedItem(),u=a.font_weight.indexOfSelectedItem(),h=a.color.indexOfSelectedItem(),f=a.color.titleOfSelectedItem(),g=i.s_colors[h].code,y=a.list_weights,S=a.labels_alignments,p=0,m=0,b=N(u,d,y),w=0,x=o/s/s/s,k=I(b[0].name);w<i.s_labels.length;){for(var M=x*Math.pow(s,w+1),_=i.s_labels.length-w-1,F=0;F<3;F++){var C=[i.s_labels[_],c,b[0].name,f,S[F]],R=i.s_hierarchy,O=C[R[0]]+"/"+C[R[1]]+"/"+C[R[2]]+"/"+C[R[3]]+"/"+C[R[4]],L=v(t,O),D=T(O,e.sharedTextStyles);if(L){p++;b[0].weight;D.style.fontFamily=c,D.style.fontSize=M,D.style.fontStyle=k,D.style.fontWeight=b[0].weight,D.style.lineHeight=1.2*M;for(var W=D.getAllInstancesLayers(),B=0;B<W.length;B++)W[B].style.syncWithSharedStyle(D)}else m++,e.sharedTextStyles.push({name:O,style:{fontFamily:c,fontSize:M,fontStyle:k,fontWeight:b[0].weight,textColor:g+"ff",lineHeight:1.2*M,alignment:F,borders:[],fills:[]}})}w++}return[m,p]}function f(e,r,n,a,i,l){var o=a.base.stringValue(),s=parseFloat(a.ratio.stringValue().replace(",",".")),c=a.font_family.titleOfSelectedItem(),d=a.font_weight.titleOfSelectedItem(),u=a.font_weight.indexOfSelectedItem(),h=a.color.indexOfSelectedItem(),f=a.color.titleOfSelectedItem(),g=i.s_colors[h].code,y=a.list_weights,S=a.labels_alignments;print(s);for(var p=0,m=0,b=N(u,d,y),w=0,x=o/s/s/s,k=I(b[0].name);w<i.s_labels.length;){for(var M=x*Math.pow(s,w+1),_=i.s_labels.length-w-1,F=0;F<3;F++){var C=[i.s_labels[_],c,b[0].name,f,S[F]],R=i.s_hierarchy,O=C[R[0]]+"/"+C[R[1]]+"/"+C[R[2]]+"/"+C[R[3]]+"/"+C[R[4]],L=v(t,O),D=T(O,e.sharedTextStyles);if(L){p++;b[0].weight;D.style.fontFamily=c,D.style.fontSize=M,D.style.fontStyle=k,D.style.fontWeight=b[0].weight,D.style.lineHeight=1.2*M;for(var W=D.getAllInstancesLayers(),B=0;B<W.length;B++)W[B].style.syncWithSharedStyle(D)}else m++,e.sharedTextStyles.push({name:O,style:{fontFamily:c,fontSize:M,fontStyle:k,fontWeight:b[0].weight,textColor:g+"ff",lineHeight:1.2*M,alignment:F,borders:[],fills:[]}})}w++}return[m,p]}function g(e,r,n,a,i,l){var o=a.base.stringValue(),s=parseFloat(a.ratio.stringValue().replace(",",".")),c=a.font_family.titleOfSelectedItem(),d=a.font_weight.titleOfSelectedItem(),u=a.font_weight.indexOfSelectedItem(),h=a.color.indexOfSelectedItem(),f=a.color.titleOfSelectedItem(),g=i.s_colors[h].code,S=a.list_weights,p=a.labels_alignments;print(s);for(var m=0,b=N(u,d,S),w=0,x=o/s/s/s,k=0,M=I(b[0].name);w<i.s_labels.length;){for(var _=x*Math.pow(s,w+1),F=i.s_labels.length-w-1,T=0;T<3;T++){var C=[i.s_labels[F],c,b[0].name,f,p[T]],R=i.s_hierarchy,O=C[R[0]]+"/"+C[R[1]]+"/"+C[R[2]]+"/"+C[R[3]]+"/"+C[R[4]];if(v(t,O))m++;else{k++;e.selectedPage;e.sharedTextStyles.push({name:O,style:{fontFamily:c,fontSize:_,fontStyle:M,fontWeight:b[0].weight,textColor:g+"ff",lineHeight:1.2*_,alignment:T,borders:[],fills:[]}})}}w++}return l>0&&y(e,r,n),[k,m]}function y(e,t,r){var a=0,l=e.sharedTextStyles,o=e.selectedPage,s=n(1).Group,c=n(1).Artboard,d=H(l),u=e.getLayersNamed("TypeSystem");if(u.length)(h=u[0]).layers=[];else var h=new c({name:"TypeSystem",parent:o});var f=e.getLayersNamed("Group TypeSystem");if(f.length)(g=f[0]).layers=[];else var g=new s({name:"Group TypeSystem",parent:h});if(d.length>0){for(var y=0;y<d.length;y++){a=80*y;for(var S=d[y].styles,p=0;p<S.length;p++){var m=new r(900*p,a,800,70);new t({text:S[p].name,sharedStyleId:S[p].id,frame:m,parent:g,style:S[p].style})}}i.a.UI.message(" Placed "+l.length+" text styles, sucessfully!"),g.adjustToFit(),h.adjustToFit();var b=h.frame.height+200,v=h.frame.width+200,w=h.frame.x-100,x=h.frame.y-100;h.frame.height=b,h.frame.width=v,h.frame.x=w,h.frame.y=x,g.frame.x=100,g.frame.y=100}else i.a.UI.message("No Styles to Place :( Try creating them first.")}function S(e,t){for(var r=!1,n=0;n<e.length;n++)if(t==e[n].id){r=e[n];break}return r}function p(e,t){for(var r=!1,n=0;n<e.length;n++)if(t.replace(" ","")==e[n].name.replace(" ","")){r=!0;break}return r}function m(e,t){for(var r=!1,n=0;n<e.length;n++)if(t.replace(" ","")==e[n].name.replace(" ","")){r=e[n];break}return r}function b(e,t){for(var r=!1,n=0;n<e.length;n++)if(t==e[n].id){r=e[n];break}return r}function v(e,t,r){var n=e.document.documentData().layerTextStyles().objects();if(n)for(var a=0;a<n.count();a++)if(n.objectAtIndex(a).name()==t)return r&&1==r?(e.document.documentData().layerTextStyles().removeSharedStyle(n.objectAtIndex(a)),!1):n.objectAtIndex(a);return!1}function w(e,t,r){var n;for(n in t){try{var a=i.a.Settings.layerSettingForKey(r,n)}catch(l){log("Could not JSON.parse value, using old methodâ€¦");a=e.command.valueForKey_onLayer(n,r.sketchObject)}null!=a&&(t[n]=a)}return t}function x(e,t){var r;for(r in t){var n=e.objectForKey(r);n&&(t[r]=n)}return t}function k(e,t,r){var n=NSComboBox.alloc().initWithFrame(r);t=t>-1?t:0;return n.addItemsWithObjectValues(e),n.selectItemAtIndex(t),n.setNumberOfVisibleItems(16),n.setCompletes(1),n}function M(e,t,r){var n=NSPopUpButton.alloc().initWithFrame(r);t=t>-1?t:0;return n.addItemsWithTitles(e),n.selectItemAtIndex(t),n.setTarget=self,n}function _(e,t,r){for(var n=NSPopUpButton.alloc().initWithFrame(r),a=(t=t>-1?t:0,[]),i=0;i<e.length;i++)a.push(e[i].name);return n.addItemsWithTitles(a),n.selectItemAtIndex(t),n.setTarget=self,n}function F(e,t,r){for(var n=0,a=0;a<r.length;a++){if(null==t&&r[a].weight==e){n=a;break}if(-1!==r[a].name.toLowerCase().indexOf(t)&&r[a].weight==e){n=a;break}}return n}function N(e,t,r){var n=[];if(r.length>0)for(var a=0;a<r.length;a++){t.replace(" ","");if(r[a].name==t){n.push({name:r[e].name,font:r[e].font,weight:r[e].weight,variation:r[e].variation});break}}else n=5;return n}function I(e){var t=void 0;return-1!==e.toLowerCase().indexOf("italic")&&(t="italic"),t}function T(e,t){for(var r=[],n=0;n<t.length;n++)if(t[n].name==e){r.push(t[n]);break}return r[0]}function C(e){return NSUserDefaults.alloc().initWithSuiteName(e)}function R(e,t,r){var n=NSTextField.alloc().initWithFrame(r);return n.setStringValue(e),n.setFont(NSFont.boldSystemFontOfSize(t)),n.setBezeled(!1),n.setDrawsBackground(!1),n.setEditable(!1),n.setSelectable(!1),n}function O(e,t,r){var n=NSTextField.alloc().initWithFrame(r);return n.setStringValue(e),n.setFont(NSFont.systemFontOfSize(t)),n.setBezeled(!1),n.setEditable(!1),n.setSelectable(!1),n}function L(e,t,r){var n=NSTextField.alloc().initWithFrame(r);return n.setStringValue(e),n.setFont(NSFont.systemFontOfSize(t)),n.setBezeled(!1),n.setDrawsBackground(!1),n.setEditable(!1),n.setSelectable(!1),n}function D(e,t,r){var n=NSButton.alloc().initWithFrame(r);t=0==t?NSOffState:NSOnState;return n.setButtonType(NSSwitchButton),n.setBezelStyle(0),n.setTitle(e.name),n.setTag(e.value),n.setState(t),n}function W(e,t,r){var n=NSView.alloc().initWithFrame(t);if(n.setWantsLayer(1),r)var a=j(e,"Shape");else a=V(e);return n.layer().cornerRadius=2,n.layer().maskedCorners=!0,n.layer().setBackgroundColor(CGColorCreateGenericRGB(a.r/255,a.g/255,a.b/255,a.a/255)),n}function B(e,t){var r=V(t);e.layer().setBackgroundColor(CGColorCreateGenericRGB(r.r/255,r.g/255,r.b/255,r.a/255))}function j(e,t){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.substr(0,7));if(e.length>7)var n=parseInt(e.slice(7,9),16);else n=255;var a=parseInt(r[1],16),i=parseInt(r[2],16),l=parseInt(r[3],16);if(Math.abs(a-i)<50&&Math.abs(a-l)<50){if(.299*a+.587*i+.114*l>127)if("container"==t)var o=K("rgb(255,255,255)","container","light");else if("in_colored_container"==t)o=K("rgb(5,5,5)","text","dark");else if("Shape"==t)o=K("rgb("+a+","+i+","+l+")","container","light");else o=K("rgb("+a+","+i+","+l+")","text","light");else if("container"==t)o=K("rgb(255,255,255)","container","light");else if("in_colored_container"==t)o=K("rgb(5,5,5)","text","dark");else if("Shape"==t)o=K("rgb("+a+","+i+","+l+")","container","dark");else o=K("rgb("+a+","+i+","+l+")","text","dark");var s=A(o,!1)}else{if("container"==t)o=K("rgb(255,255,255)","container","light");else if("Shape"==t||"in_colored_container"==t)o=K("rgb("+a+","+i+","+l+")","container","color");else o=K("rgb("+a+","+i+","+l+")","text","color");s=A(o,!1)}return r?{r:s.r,g:s.g,b:s.b,a:n}:null}function G(e){if(/^rgb\((((((((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5]),\s?)){2}|((((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5])\s)){2})((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5]))|((((([1-9]?\d(\.\d+)?)|100|(\.\d+))%,\s?){2}|((([1-9]?\d(\.\d+)?)|100|(\.\d+))%\s){2})(([1-9]?\d(\.\d+)?)|100|(\.\d+))%))\)$/i.test(e)){var t=e.indexOf(",")>-1?",":" ";for(var r in e=e.substr(4).split(")")[0].split(t)){var n=e[r];n.indexOf("%")>-1&&(e[r]=Math.round(n.substr(0,n.length-1)/100*255))}var a=(+e[0]).toString(16),i=(+e[1]).toString(16),l=(+e[2]).toString(16);return 1==a.length&&(a="0"+a),1==i.length&&(i="0"+i),1==l.length&&(l="0"+l),"#"+a+i+l}return"Invalid input color"}function A(e,t){if(/^hsl\(((((([12]?[1-9]?\d)|[12]0\d|(3[0-5]\d))(\.\d+)?)|(\.\d+))(deg)?|(0|0?\.\d+)turn|(([0-6](\.\d+)?)|(\.\d+))rad)((,\s?(([1-9]?\d(\.\d+)?)|100|(\.\d+))%){2}|(\s(([1-9]?\d(\.\d+)?)|100|(\.\d+))%){2})\)$/i.test(e)){var r=e.indexOf(",")>-1?",":" ";t=!0===t;var n=(e=e.substr(4).split(")")[0].split(r))[0],a=e[1].substr(0,e[1].length-1)/100,i=e[2].substr(0,e[2].length-1)/100;n.indexOf("deg")>-1?n=n.substr(0,n.length-3):n.indexOf("rad")>-1?n=Math.round(n.substr(0,n.length-3)/(2*Math.PI)*360):n.indexOf("turn")>-1&&(n=Math.round(360*n.substr(0,n.length-4))),n>=360&&(n%=360);var l=(1-Math.abs(2*i-1))*a,o=l*(1-Math.abs(n/60%2-1)),s=i-l/2,c=0,d=0,u=0;return 0<=n&&n<60?(c=l,d=o,u=0):60<=n&&n<120?(c=o,d=l,u=0):120<=n&&n<180?(c=0,d=l,u=o):180<=n&&n<240?(c=0,d=o,u=l):240<=n&&n<300?(c=o,d=0,u=l):300<=n&&n<360&&(c=l,d=0,u=o),{r:c=Math.round(255*(c+s)),g:d=Math.round(255*(d+s)),b:u=Math.round(255*(u+s))}}return"Invalid input color"}function K(e,t,r){if(/^rgb\((((((((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5]),\s?)){2}|((((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5])\s)){2})((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5]))|((((([1-9]?\d(\.\d+)?)|100|(\.\d+))%,\s?){2}|((([1-9]?\d(\.\d+)?)|100|(\.\d+))%\s){2})(([1-9]?\d(\.\d+)?)|100|(\.\d+))%))\)$/i.test(e)){var n=e.indexOf(",")>-1?",":" ";for(var a in e=e.substr(4).split(")")[0].split(n)){var i=e[a];i.indexOf("%")>-1&&(e[a]=Math.round(i.substr(0,i.length-1)/100*255))}var l=e[0]/255,o=e[1]/255,s=e[2]/255,c=Math.min(l,o,s),d=Math.max(l,o,s),u=d-c,h=0,f=0,g=0;if(h=0==u?0:d==l?(o-s)/u%6:d==o?(s-l)/u+2:(l-o)/u+4,(h=Math.round(60*h))<0&&(h+=360),g=(d+c)/2,f=+(100*(f=0==u?0:u/(1-Math.abs(2*g-1)))).toFixed(1),g=+(100*g).toFixed(1),"light"==r)if("container"==t){var y=100-g,S=2,p=.96;g=10*Math.pow(p,y)+S}else g=100-g;else if("dark"==r)if("text"==t){y=100-g,S=5,p=.96;g=100-(10*Math.pow(p,y)+S)}else g=100-g;else{var m=f+-50;m>=100?f=100:m<=0?f=0:f+=-50,f=75,g=65}if(g>100)var b=100;else b=g;return"hsl("+h+","+f+"%,"+b+"%)"}return"Invalid input color"}function V(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.substr(0,7));if(e.length>7)var r=parseInt(e.slice(7,9),16);else r=255;return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:r}:null}function P(e){var t=NSView.alloc().initWithFrame(e);return t.setWantsLayer(1),t.layer().setBackgroundColor(CGColorCreateGenericRGB(.8,.8,.8,1)),t}function E(e,t){var r=NSTextField.alloc().initWithFrame(t);return r.setStringValue(e),r.delegate=self,r}function Y(e,t){var r=NSTextField.alloc().initWithFrame(t);return r.setStringValue(e),r.setDrawsBackground(!1),r.delegate=self,r}function U(e,t){var r=NSControl.alloc().initWithFrame(t);return r.setStringValue(e),r.delegate=self,r}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r],a=t[r+1];a&&n.setNextKeyView(a)}e.window().setInitialFirstResponder(t[0])}function z(e,t,r){var n=[];if(r)var a=e.length;else a=e.length-1;for(var i=0;i<a;i++){var l=e[i].stringValue();(/^#[0-9A-F]{8}$/i.test(l)||/^#[0-9A-F]{6}$/i.test(l))&&n.push({name:t[i].stringValue(),code:e[i].stringValue()})}return n}function H(e){for(var t=[],r=0;r<e.length;r++){var n=e[r].style.fontSize,a=e[r].name;if(-1!==a.indexOf("/"))var i=a.split("/")[0];else i=a;if(0==t.length)t.push({group:i,styles:[e[r]],group_size:n}),i;else{for(var l=!1,o=0,s=0;s<t.length;s++)if(i==t[s].group){l=!0,o=s;break}l?t[o].styles.push(e[r]):(t.push({group:i,styles:[e[r]],group_size:n}),i)}}return t}function q(e,t){e.sharedStyleId=t.id,e.sharedStyle=t,e.style=t.style,e.style.syncWithSharedStyle(t)}function Z(e,t,r,n,a,i){var l="DarkModeSystem/"+t+"-"+a+"/lightMode";return i.push({name:l,style:n,styleType:r,document:e}),i}function J(e){var t=e,r=e.id;if("Page"!=t.parent.type)for(;"Artboard"!=t.type&&"SymbolMaster"!=t.type&&"Page"!=t.type;)r=(t=t.parent).id;return r}function Q(e,t){console.log("Step 0 - Reviewing Settings...");for(var r=[],n=0;n<t.length;n++){var a=t[n].dark,i=t[n].light;if("text"==t[n].type)var l=e.getSharedTextStyleWithID(i),o=e.getSharedTextStyleWithID(a);else l=e.getSharedLayerStyleWithID(i),o=e.getSharedLayerStyleWithID(a);void 0===l||void 0===o||r.push(t[n])}return r}function X(e,t,r,n){var a=t.find("Shape",r.pages[n]),i=t.find("ShapePath",r.pages[n]),l=t.find("Text",r.pages[n]),o=r.sharedLayerStyles,s=r.sharedTextStyles,c=r.sharedLayerStyles.length+r.sharedTextStyles.length,d=(e.documentSettingForKey(r,"Styles"),e.documentSettingForKey(r,"Styles_Containers")),u=e.documentSettingForKey(r,"Styles_Layers"),h=e.documentSettingForKey(r,"Styles_Texts");console.log("initial styles"+c),console.log("Step 1 - Validating...");for(var f=[],g=[],y=0,p=0,m=d.length,b=u.length,v=h.length,w=(y=0,m),x=0;x<i.length;x++)if(i[x].frame.width>200&&i[x].frame.height>200&&"Rectangle"==i[x].shapeType){0,y!=parseInt(100*x/i.length)&&(console.log("Containers 1 - "+y+"%"),y=parseInt(100*x/i.length));for(var k=0;k<i[x].style.fills.length;k++)if(1==i[x].style.fills[k].enabled){var M=i[x].style.fills[k].color;break}var _=V(M);if(Math.abs(_.r-_.g)<50&&Math.abs(_.r-_.b)<50)var F="container_monotone";else F="container_color";var N=!0;0!=(G=S(o,i[x].sharedStyleId))&&(N=i[x].style.isOutOfSyncWithSharedStyle(G));var I=!1;if(!G||G&&N){var T=!1;if(A=re(r,o,i[x].style,d,u,h,void 0,["layer","layer","text"]))for(var C=0;C<d.length;C++)if(d[C].light==A.id){if(d[C].element!=F){K=!0;break}break}if(!A||T){w++;var R=(o=Z(r,"Contsainer","Layer",i[x].style,w,o)).length-1;q(i[x],o[R]);var O=i[x].frame,L=J(i[x]);if("container_color"==F){var D={x:(W=te(i[x])).x,y:W.y,width:i[x].frame.width,height:i[x].frame.height};f.push({artboard:L,container:D})}g.push({action:"new",type:"layer",element:F,id:o[R].id})}else{q(i[x],A);O=i[x].frame,L=J(i[x]);if("container_color"==F){D={x:(W=te(i[x])).x,y:W.y,width:i[x].frame.width,height:i[x].frame.height};f.push({artboard:L,container:D})}ne(r,d,g,A.id,"layer")||g.push({action:"link",type:"layer",element:F,id:A.id})}}else{q(i[x],G);O=i[x].frame,L=J(i[x]);if("container_color"==F){var W;D={x:(W=te(i[x])).x,y:W.y,width:i[x].frame.width,height:i[x].frame.height};f.push({artboard:L,container:D})}ne(r,d,g,G.id,"layer")||g.push({action:"save_setting",type:"layer",element:F,id:G.id})}}for(p=b,x=0;x<i.length;x++)if(i[x].frame.width<200||i[x].frame.height<200||"Rectangle"!=i[x].shapeType){0,y!=parseInt(100*x/i.length)&&(console.log("Shapes paths 1 - "+y+"%"),y=parseInt(100*x/i.length));for(k=0;k<i[x].style.fills.length;k++)if(1==i[x].style.fills[k].enabled){0;break}O="small",N=!0;0!=(G=S(o,i[x].sharedStyleId))&&(N=i[x].style.isOutOfSyncWithSharedStyle(G));I=ee(i[x],f);if(!G||G&&N){T=!1;if(A=re(r,o,i[x].style,u,d,h,I,["layer","layer","text"]))for(C=0;C<g.length;C++)if(g[C].id==A.id){if(g[C].colored_container!=I){T=!0;break}break}if(!A||T){p++;R=(o=Z(r,"ShapePath","Layer",i[x].style,p,o)).length-1;q(i[x],o[R]),g.push({action:"new",type:"layer",colored_container:I,element:O,id:o[R].id,layerName:i[x].name})}else{q(i[x],A),ne(r,u,g,A.id,"layer")||g.push({action:"link",type:"layer",colored_container:I,element:O,id:A.id,layerName:i[x].name})}}else{q(i[x],G),ne(r,u,g,G.id,"layer")||g.push({action:"save_setting",type:"layer",colored_container:I,element:O,id:G.id,layerName:i[x].name})}}y=0;var B=p;for(x=0;x<a.length;x++){0,y!=parseInt(100*x/a.length)&&(console.log("Shapes 1 - "+y+"%"),y=parseInt(100*x/a.length));O="small",N=!0;0!=(G=S(o,a[x].sharedStyleId))&&(N=a[x].style.isOutOfSyncWithSharedStyle(G));I=ee(a[x],f);if(!G||G&&N){T=!1;if(A=re(r,o,a[x].style,u,d,h,I,["layer","layer","text"]))for(C=0;C<g.length;C++)if(g[C].id==A.id){if(g[C].colored_container!=I){T=!0;break}break}if(!A||T){B++;R=(o=Z(r,"Shape","Layer",a[x].style,B,o)).length-1;q(a[x],o[R]),g.push({action:"new",type:"layer",colored_container:I,element:O,id:o[R].id,layerName:a[x].name})}else{q(a[x],A),ne(r,u,g,A.id,"layer")||g.push({action:"link",type:"layer",colored_container:I,element:O,id:A.id,layerName:a[x].name})}}else{q(a[x],G),ne(r,u,g,G.id,"layer")||g.push({action:"save_setting",type:"layer",colored_container:I,element:O,id:G.id,layerName:a[x].name})}}y=0;var j=v;for(x=0;x<l.length;x++){0,y!=parseInt(100*x/l.length)&&(console.log("Texts 1 - "+y+"%"),y=parseInt(100*x/l.length));var G;N=!0;0!=(G=S(s,l[x].sharedStyleId))&&(N=l[x].style.isOutOfSyncWithSharedStyle(G));I=ee(l[x],f);if(!G||G&&N){T=!1;var A,K=!1;if(A=re(r,s,l[x].style,h,d,u,I,["text","layer","layer"]))for(C=0;C<g.length;C++)if(g[C].id==A.id){if(g[C].colored_container!=I){T=!0;break}break}K=!1;if(A&&!T)for(C=0;C<h.length;C++)if(h[C].light==A.id){if("text"!=h[C].element){K=!0;break}break}if(!A||T||K){j++;R=(s=Z(r,l[x].style.fontSize<13?"Text-Small":l[x].style.fontSize<16?"Text-Body":"Text-Heading","Text",l[x].style,j,s)).length-1;q(l[x],s[R]),g.push({action:"new",type:"text",colored_container:I,id:s[R].id,layerName:l[x].name})}else{q(l[x],A),ne(r,h,g,A.id,"text")||g.push({action:"link",type:"text",colored_container:I,id:A.id,layerName:l[x].name})}}else{if(q(l[x],G),!ne(r,h,g,G.id,"text")){I=ee(l[x],f);g.push({action:"save_setting",type:"text",colored_container:I,id:G.id,layerName:l[x].name})}}}return{layer:o,text:s,new_styles:g}}function ee(e,t){for(var r=!1,n=J(e),a=!1,i=te(e),l=0;l<t.length;l++)n==t[l].artboard&&(a=t[l],i.x>=a.container.x&&i.x<=a.container.x+a.container.width&&i.y>=a.container.y&&i.y<=a.container.y+a.container.height&&(r=!0));return r}function te(e){var t=e,r=e.frame.x,n=e.frame.y;if("Page"!=t.parent.type)for(;"Artboard"!=t.type&&"SymbolMaster"!=t.type&&"Page"!=t.type;)"Artboard"!=(t=t.parent).type&&"SymbolMaster"!=t.type&&"Page"!=t.type&&(r+=t.frame.x,n+=t.frame.y);return{x:r,y:n}}function re(e,t,r,n,a,i,l,o){for(var s=!1,c=!1,d=!1,u=0;u<n.length;u++){if("layer"==o[0])var h=e.getSharedLayerStyleWithID(n[u].light);else h=e.getSharedTextStyleWithID(n[u].light);if(!(g=r.isOutOfSyncWithSharedStyle(h))&&n[u].colored_container==l){c=!0,s=h;break}}if(!c)for(u=0;u<a.length;u++){if("layer"==o[1])h=e.getSharedLayerStyleWithID(a[u].light);else h=e.getSharedTextStyleWithID(a[u].light);if(!(g=r.isOutOfSyncWithSharedStyle(h))){d=!0;break}}if(!c&&!d)for(u=0;u<i.length;u++){if("layer"==o[2])h=e.getSharedLayerStyleWithID(i[u].light);else h=e.getSharedTextStyleWithID(i[u].light);if(!(g=r.isOutOfSyncWithSharedStyle(h))){d=!0;break}}if(!c&&!d)for(var f=0;f<t.length;f++){var g=r.isOutOfSyncWithSharedStyle(t[f]),y=t[f].getLibrary();if(!g&&null==y){s=t[f];break}}return s}function ne(e,t,r,n,a){for(var i=!1,l=0;l<r.length;l++)if(n==r[l].id){i=l;break}for(l=0;l<t.length;l++)if(n==t.light){if("layer"==a)var o=e.getSharedLayerStyleWithID(t.dark);else o=e.getSharedTextStyleWithID(t.dark);null!=o&&(i=t[l]);break}return i}function ae(e,t,r,n,a){console.log("........................................."),console.log("Step 2 - Create Dark Mode Layer Styles...");for(var i=0,l=e.documentSettingForKey(t,"Styles"),o=e.documentSettingForKey(t,"Styles_Containers"),s=e.documentSettingForKey(t,"Styles_Layers"),c=e.documentSettingForKey(t,"Styles_Texts"),d=r,u=n,h=0;h<a.length;h++)if(parseInt(i)!=parseInt(100*h/a.length)&&(console.log("Step 2 - "+i+"%"),i=parseInt(100*h/a.length)),"layer"==a[h].type){if((M=(k=b(r,a[h].id)).name).includes("lightMode"))var f=M.replace("/lightMode","").replace(" ","");else{f=M.replace(" ","");k.name=k.name+"/lightMode"}var g=f+"/DarkMode";d.push({name:g,style:k.style,styleType:"Layer",document:t});var y,S=d.length-1;if(y=1==a[h].colored_container?"in_colored_container":"small"==a[h].element?"Shape":"container",k.style.fills.length>0)for(var p=0;p<k.style.fills.length;p++)if("Gradient"==k.style.fills[p].fillType)for(var m=0;m<k.style.fills[p].gradient.stops.length;m++){var v=ie(k.style.fills[p].gradient.stops[m].color,y);d[S].style.fills[p].gradient.stops[m].color=v}else{v=ie(k.style.fills[p].color,y);d[S].style.fills[p].color=v}if(k.style.borders.length>0)for(var w=0;w<k.style.borders.length;w++)if("Gradient"==k.style.borders[w].fillType)for(m=0;m<k.style.borders[w].gradient.stops.length;m++){v=ie(k.style.borders[w].gradient.stops[m].color,y);d[S].style.borders[w].color=v}else{v=ie(k.style.borders[w].color,y);d[S].style.borders[w].color=v}if(k.style.shadows.length>0)for(var x=0;x<k.style.shadows.length;x++){v=ie(k.style.shadows[x].color,y);d[S].style.shadows[x].color=v}if(k.style.innerShadows.length>0)for(x=0;x<k.style.innerShadows.length;x++){v=ie(k.style.innerShadows[x].color,y);d[S].style.innerShadows[x].color=v}l.push({type:"layer",colored_container:a[h].colored_container,element:a[h].element,light:k.id,dark:d[S].id}),"small"===a[h].element?s.push({type:"layer",colored_container:a[h].colored_container,element:a[h].element,light:k.id,dark:d[S].id}):o.push({type:"layer",colored_container:a[h].colored_container,element:a[h].element,light:k.id,dark:d[S].id})}else{var k,M;if((M=(k=b(n,a[h].id)).name).includes("lightMode"))f=M.replace("/lightMode","").replace(" ","");else{f=M.replace(" ","");k.name=k.name+"/lightMode"}g=f+"/DarkMode";u.push({name:g,style:k.style,styleType:"Layer",document:t});S=u.length-1;y=1==a[h].colored_container?"in_colored_container":"Text";v=ie(k.style.textColor,y);u[S].style.textColor=v,l.push({type:"text",colored_container:a[h].colored_container,element:"text",light:k.id,dark:u[S].id}),c.push({type:"text",colored_container:a[h].colored_container,element:"text",light:k.id,dark:u[S].id})}return{layer:d,text:u,settings:l,settings_c:o,settings_l:s,settings_t:c}}function ie(e,t){if(e.length>7)var r=e.slice(7,9);else r="ff";var n=j(e,t);return G("rgb("+n.r+","+n.g+","+n.b+")")+r}function le(e,t,r){for(var n=!1,a=0;a<r.length;a++){if(a==r.length-1||r.length,r[a].light==e&&1==t){n=r[a].dark;break}if(r[a].dark==e&&0==t){n=r[a].light;break}}return n}function oe(e,t,r,n,a,i,l){console.log(".........................................");t.find("*",r.pages[n]);var o=t.find("Artboard",r.pages[n]),s=t.find("Shape",r.pages[n]),c=t.find("ShapePath",r.pages[n]),d=t.find("Text",r.pages[n]),u=e.documentSettingForKey(r,"Styles");if(l)var h="DarkMode";else h="lightMode";var f=0;console.log("Step 4 - Switch to "+h);for(var g=0,y=0;y<s.length;y++){if(g!=parseInt(100*y/s.length)&&(console.log("Shapes 4 - "+g+"%"),g=parseInt(100*y/s.length)),0!=(S=le(s[y].sharedStyleId,l,u)))null!=(p=r.getSharedLayerStyleWithID(S))&&(s[y].sharedStyleId=p.id,s[y].sharedStyle=p,s[y].style=p.style,s[y].style.syncWithSharedStyle(p))}for(g=0,y=0;y<c.length;y++){if(g!=parseInt(100*y/c.length)&&(console.log("Shapes Paths 4 - "+g+"%"),g=parseInt(100*y/c.length)),0!=(S=le(c[y].sharedStyleId,l,u)))null!=(p=r.getSharedLayerStyleWithID(S))&&(c[y].sharedStyleId=p.id,c[y].sharedStyle=p,c[y].style=p.style,c[y].style.syncWithSharedStyle(p),f++)}for(g=0,y=0;y<d.length;y++){var S,p;if(g!=parseInt(100*y/d.length)&&(console.log("Texts 4 - "+g+"%"),g=parseInt(100*y/d.length)),0!=(S=le(d[y].sharedStyleId,l,u)))null!=(p=r.getSharedTextStyleWithID(S))&&(d[y].sharedStyleId=p.id,d[y].sharedStyle=p,d[y].style=p.style,d[y].style.syncWithSharedStyle(p),f++)}if(f>0)for(g=0,y=0;y<o.length;y++){if(console.log("Artboard - "+y),g!=parseInt(100*y/o.length)&&(console.log("Artboards 4 - "+g+"%"),g=parseInt(100*y/o.length)),0==o[y].background.enabled)var m="#ffffff";else m=o[y].background.color;var b=j(m,"Artboard"),v=G("rgb("+b.r+","+b.g+","+b.b+")")+"ff";o[y].background.color=v,o[y].background.enabled=!0}return f}},function(e,t,r){e.exports=g,g.Minimatch=y;var n={sep:"/"};try{n=r(5)}catch(m){}var a=g.GLOBSTAR=y.GLOBSTAR={},i=r(6),l={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},o="[^/]",s=o+"*?",c="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",d="(?:(?!(?:\\/|^)\\.).)*?",u="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var h=/\/+/;function f(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),Object.keys(e).forEach((function(t){r[t]=e[t]})),r}function g(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new y(t,r).match(e))}function y(e,t){if(!(this instanceof y))return new y(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==n.sep&&(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function S(e,t){if(t||(t=this instanceof y?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:i(e)}g.filter=function(e,t){return t=t||{},function(r,n,a){return g(r,e,t)}},g.defaults=function(e){if(!e||!Object.keys(e).length)return g;var t=g,r=function(r,n,a){return t.minimatch(r,n,f(e,a))};return r.Minimatch=function(r,n){return new t.Minimatch(r,f(e,n))},r},y.defaults=function(e){return e&&Object.keys(e).length?g.defaults(e).Minimatch:y},y.prototype.debug=function(){},y.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(h)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r},y.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=this.options,n=0;if(r.nonegate)return;for(var a=0,i=e.length;a<i&&"!"===e.charAt(a);a++)t=!t,n++;n&&(this.pattern=e.substr(n));this.negate=t},g.braceExpand=function(e,t){return S(e,t)},y.prototype.braceExpand=S,y.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return a;if(""===e)return"";var n,i="",c=!!r.nocase,d=!1,h=[],f=[],g=!1,y=-1,S=-1,b="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=this;function w(){if(n){switch(n){case"*":i+=s,c=!0;break;case"?":i+=o,c=!0;break;default:i+="\\"+n}v.debug("clearStateChar %j %j",n,i),n=!1}}for(var x,k=0,M=e.length;k<M&&(x=e.charAt(k));k++)if(this.debug("%s\t%s %s %j",e,k,i,x),d&&u[x])i+="\\"+x,d=!1;else switch(x){case"/":return!1;case"\\":w(),d=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,k,i,x),g){this.debug("  in class"),"!"===x&&k===S+1&&(x="^"),i+=x;continue}v.debug("call clearStateChar %j",n),w(),n=x,r.noext&&w();continue;case"(":if(g){i+="(";continue}if(!n){i+="\\(";continue}h.push({type:n,start:k-1,reStart:i.length,open:l[n].open,close:l[n].close}),i+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,i),n=!1;continue;case")":if(g||!h.length){i+="\\)";continue}w(),c=!0;var _=h.pop();i+=_.close,"!"===_.type&&f.push(_),_.reEnd=i.length;continue;case"|":if(g||!h.length||d){i+="\\|",d=!1;continue}w(),i+="|";continue;case"[":if(w(),g){i+="\\"+x;continue}g=!0,S=k,y=i.length,i+=x;continue;case"]":if(k===S+1||!g){i+="\\"+x,d=!1;continue}if(g){var F=e.substring(S+1,k);try{RegExp("["+F+"]")}catch(m){var N=this.parse(F,p);i=i.substr(0,y)+"\\["+N[0]+"\\]",c=c||N[1],g=!1;continue}}c=!0,g=!1,i+=x;continue;default:w(),d?d=!1:!u[x]||"^"===x&&g||(i+="\\"),i+=x}g&&(F=e.substr(S+1),N=this.parse(F,p),i=i.substr(0,y)+"\\["+N[0],c=c||N[1]);for(_=h.pop();_;_=h.pop()){var I=i.slice(_.reStart+_.open.length);this.debug("setting tail",i,_),I=I.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",I,I,_,i);var T="*"===_.type?s:"?"===_.type?o:"\\"+_.type;c=!0,i=i.slice(0,_.reStart)+T+"\\("+I}w(),d&&(i+="\\\\");var C=!1;switch(i.charAt(0)){case".":case"[":case"(":C=!0}for(var R=f.length-1;R>-1;R--){var O=f[R],L=i.slice(0,O.reStart),D=i.slice(O.reStart,O.reEnd-8),W=i.slice(O.reEnd-8,O.reEnd),B=i.slice(O.reEnd);W+=B;var j=L.split("(").length-1,G=B;for(k=0;k<j;k++)G=G.replace(/\)[+*?]?/,"");var A="";""===(B=G)&&t!==p&&(A="$"),i=L+D+B+A+W}""!==i&&c&&(i="(?=.)"+i);C&&(i=b+i);if(t===p)return[i,c];if(!c)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var K=r.nocase?"i":"";try{var V=new RegExp("^"+i+"$",K)}catch(m){return new RegExp("$.")}return V._glob=e,V._src=i,V};var p={};g.makeRe=function(e,t){return new y(e,t||{}).makeRe()},y.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?s:t.dot?c:d,n=t.nocase?"i":"",i=e.map((function(e){return e.map((function(e){return e===a?r:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(l){this.regexp=!1}return this.regexp},g.match=function(e,t,r){var n=new y(t,r=r||{});return e=e.filter((function(e){return n.match(e)})),n.options.nonull&&!e.length&&e.push(t),e},y.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/"));e=e.split(h),this.debug(this.pattern,"split",e);var a,i,l=this.set;for(this.debug(this.pattern,"set",l),i=e.length-1;i>=0&&!(a=e[i]);i--);for(i=0;i<l.length;i++){var o=l[i],s=e;if(r.matchBase&&1===o.length&&(s=[a]),this.matchOne(s,o,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},y.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,l=0,o=e.length,s=t.length;i<o&&l<s;i++,l++){this.debug("matchOne loop");var c,d=t[l],u=e[i];if(this.debug(t,d,u),!1===d)return!1;if(d===a){this.debug("GLOBSTAR",[t,d,u]);var h=i,f=l+1;if(f===s){for(this.debug("** at the end");i<o;i++)if("."===e[i]||".."===e[i]||!n.dot&&"."===e[i].charAt(0))return!1;return!0}for(;h<o;){var g=e[h];if(this.debug("\nglobstar while",e,h,t,f,g),this.matchOne(e.slice(h),t.slice(f),r))return this.debug("globstar found match!",h,o,g),!0;if("."===g||".."===g||!n.dot&&"."===g.charAt(0)){this.debug("dot detected!",e,h,t,f);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!r||(this.debug("\n>>> no match, partial?",e,h,t,f),h!==o))}if("string"==typeof d?(c=n.nocase?u.toLowerCase()===d.toLowerCase():u===d,this.debug("string match",d,u,c)):(c=u.match(d),this.debug("pattern match",d,u,c)),!c)return!1}if(i===o&&l===s)return!0;if(i===o)return r;if(l===s)return i===o-1&&""===e[i];throw new Error("wtf?")}},function(e,t){e.exports=require("path")},function(e,t,r){var n=r(7),a=r(8);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,r){var i=[];var l=a("{","}",t);if(!l||/\$$/.test(l.pre))return[t];var s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(l.body);var c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(l.body);var u=s||c;var S=l.body.indexOf(",")>=0;if(!u&&!S)return l.post.match(/,.*\}/)?(t=l.pre+"{"+l.body+o+l.post,e(t)):[t];var p;if(u)p=l.body.split(/\.\./);else{if(1===(p=function e(t){if(!t)return[""];var r=[];var n=a("{","}",t);if(!n)return t.split(",");var i=n.pre;var l=n.body;var o=n.post;var s=i.split(",");s[s.length-1]+="{"+l+"}";var c=e(o);o.length&&(s[s.length-1]+=c.shift(),s.push.apply(s,c));r.push.apply(r,s);return r}(l.body)).length)if(1===(p=e(p[0],!1).map(h)).length)return(b=l.post.length?e(l.post,!1):[""]).map((function(e){return l.pre+p[0]+e}))}var m=l.pre;var b=l.post.length?e(l.post,!1):[""];var v;if(u){var w=d(p[0]),x=d(p[1]),k=Math.max(p[0].length,p[1].length),M=3==p.length?Math.abs(d(p[2])):1,_=g;x<w&&(M*=-1,_=y);var F=p.some(f);v=[];for(var N=w;_(N,x);N+=M){var I;if(c)"\\"===(I=String.fromCharCode(N))&&(I="");else if(I=String(N),F){var T=k-I.length;if(T>0){var C=new Array(T+1).join("0");I=N<0?"-"+C+I.slice(1):C+I}}v.push(I)}}else v=n(p,(function(t){return e(t,!1)}));for(var R=0;R<v.length;R++)for(var O=0;O<b.length;O++){var L=m+v[R]+b[O];(!r||u||L)&&i.push(L)}return i}(function(e){return e.split("\\\\").join(i).split("\\{").join(l).split("\\}").join(o).split("\\,").join(s).split("\\.").join(c)}(e),!0).map(u)};var i="\0SLASH"+Math.random()+"\0",l="\0OPEN"+Math.random()+"\0",o="\0CLOSE"+Math.random()+"\0",s="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function d(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function u(e){return e.split(i).join("\\").split(l).join("{").split(o).join("}").split(s).join(",").split(c).join(".")}function h(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function g(e,t){return e<=t}function y(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var n=[],a=0;a<e.length;a++){var i=t(e[a],a);r(i)?n.push.apply(n,i):n.push(i)}return n};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t,r){e instanceof RegExp&&(e=a(e,r)),t instanceof RegExp&&(t=a(t,r));var n=i(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function a(e,t){var r=t.match(e);return r?r[0]:null}function i(e,t,r){var n,a,i,l,o,s=r.indexOf(e),c=r.indexOf(t,s+1),d=s;if(s>=0&&c>0){for(n=[],i=r.length;d>=0&&!o;)d==s?(n.push(d),s=r.indexOf(e,d+1)):1==n.length?o=[n.pop(),c]:((a=n.pop())<i&&(i=a,l=c),c=r.indexOf(t,d+1)),d=s<c&&s>=0?s:c;n.length&&(o=[i,l])}return o}e.exports=n,n.range=i},function(e,t){e.exports=require("sketch/settings")}]);if("default"===e&&"function"==typeof r)r(t);else{if("function"!=typeof r[e])throw new Error('Missing export named "'+e+'". Your command should contain something like `export function " + key +"() {}`.');r[e](t)}}catch(n){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw n;process.emit("uncaughtException",n,"uncaughtException")}}globalThis.getSettings=__skpm_run.bind(this,"getSettings"),globalThis.onRun=__skpm_run.bind(this,"default"),globalThis.documentColors=__skpm_run.bind(this,"documentColors"),globalThis.createDarkmode=__skpm_run.bind(this,"createDarkmode"),globalThis.DeleteAllSettings=__skpm_run.bind(this,"DeleteAllSettings"),globalThis.switchLight=__skpm_run.bind(this,"switchLight"),globalThis.switchDark=__skpm_run.bind(this,"switchDark");